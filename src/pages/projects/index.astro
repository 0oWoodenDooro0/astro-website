---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const projects = (await getCollection('projects')).sort(
	(a, b) => b.data.priority - a.data.priority
);
---

<Layout title="Projects">
	<main class="container mx-auto px-4 py-8">
		<h1 class="text-4xl font-bold text-ctp-lavender mb-8">Projects</h1>
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
			{
				projects.map((project) => (
					<div class="border border-ctp-surface0 rounded-lg p-6 bg-ctp-mantle hover:border-ctp-blue transition-colors">
						<h2 class="text-2xl font-semibold text-ctp-blue mb-2">
							{project.data.title}
						</h2>
						<p class="text-ctp-text mb-4">{project.data.description}</p>
						<div class="flex flex-wrap gap-2 mb-4">
							{project.data.techStack.map((tech) => (
								<span class="bg-ctp-surface1 text-ctp-subtext1 px-2 py-1 rounded text-xs">
									{tech}
								</span>
							))}
						</div>
						{project.data.githubLink && (
							<a
								href={project.data.githubLink}
								target="_blank"
								rel="noopener noreferrer"
								class="text-ctp-sapphire hover:underline inline-flex items-center gap-1"
							>
								View on GitHub
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/></svg>
							</a>
						)}
					</div>
				))
			}
		</div>
	</main>
</Layout>
