---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const configs = await getCollection('config');
---

<Layout title="Dotfiles / Configs | shaggy-star">
	<main class="container mx-auto px-4 py-12">
		<header class="mb-12">
			<h1 class="text-4xl font-bold text-ctp-lavender mb-4 font-mono">&gt; ~/config</h1>
			<p class="text-ctp-subtext1">My personal setup and dotfiles. Shared for reference and archival.</p>
		</header>

		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
			{
				configs.map((config) => (
					<a
						href={`/config/${config.id}/`}
						class="group border border-ctp-surface0 rounded-lg p-6 bg-ctp-mantle hover:border-ctp-blue transition-all flex flex-col"
					>
						<div class="flex items-center gap-3 mb-4">
							<div class="text-ctp-blue group-hover:text-ctp-sapphire transition-colors">
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>
							</div>
							<span class="text-xl font-mono font-bold text-ctp-blue group-hover:text-ctp-sapphire transition-colors">
								{config.data.filename}
							</span>
						</div>
						<p class="text-ctp-text text-sm mb-6 line-clamp-2">{config.data.description || 'System configuration file'}</p>
						<div class="mt-auto flex justify-between items-center">
							<span class="text-[10px] font-mono font-bold uppercase tracking-wider text-ctp-overlay2 border border-ctp-surface1 px-2 py-0.5 rounded">
								{config.data.language}
							</span>
							<span class="text-ctp-surface2 group-hover:text-ctp-blue transition-colors">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
							</span>
						</div>
					</a>
				))
			}
		</div>
	</main>
</Layout>
