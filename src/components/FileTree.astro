---
interface Props {
  tree: any[]; // GitHubFile[]
}

const { tree } = Astro.props;

// Sort: Directories first, then files alphabetically
const sortedTree = [...tree].sort((a, b) => {
  if (a.type === b.type) return a.name.localeCompare(b.name);
  return a.type === 'dir' ? -1 : 1;
});
---

<div class="font-mono text-sm">
  <ul class="space-y-1">
    {sortedTree.map((item) => (
      <li>
        <div class="flex items-center gap-2 py-1 px-2 rounded hover:bg-ctp-surface0/50 transition-colors group cursor-pointer">
          <span class="text-ctp-overlay1 group-hover:text-ctp-pink transition-colors">
            {item.type === 'dir' ? (
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>
            ) : (
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>
            )}
          </span>
          <span class="text-ctp-text group-hover:text-ctp-pink transition-colors truncate">
            {item.name}
          </span>
        </div>
        {/* TODO: Implement recursive rendering for expanded folders if needed */}
      </li>
    ))}
  </ul>
</div>
